# Bitmap Font Handler for LCD_1inch28
# This module provides custom bitmap fonts for better-looking large text displays

# Large digit font (16x24 pixels per character)
# Format: Each digit is represented as a list of 24 rows, each row is 16 bits (2 bytes)
# 1 = pixel on, 0 = pixel off

LARGE_DIGITS = {
    '0': [
        0b0000111111110000,
        0b0011111111111100,
        0b0111111111111110,
        0b0111100000011110,
        0b1111000000001111,
        0b1110000000000111,
        0b1110000000000111,
        0b1110000000000111,
        0b1110000000000111,
        0b1110000000000111,
        0b1110000000000111,
        0b1110000000000111,
        0b1110000000000111,
        0b1110000000000111,
        0b1110000000000111,
        0b1110000000000111,
        0b1110000000000111,
        0b1111000000001111,
        0b0111100000011110,
        0b0111111111111110,
        0b0011111111111100,
        0b0000111111110000,
        0b0000000000000000,
        0b0000000000000000,
    ],
    '1': [
        0b0000000110000000,
        0b0000001110000000,
        0b0000011110000000,
        0b0000111110000000,
        0b0001111110000000,
        0b0011101110000000,
        0b0111001110000000,
        0b0000001110000000,
        0b0000001110000000,
        0b0000001110000000,
        0b0000001110000000,
        0b0000001110000000,
        0b0000001110000000,
        0b0000001110000000,
        0b0000001110000000,
        0b0000001110000000,
        0b0000001110000000,
        0b0000001110000000,
        0b0000001110000000,
        0b0111111111111110,
        0b0111111111111110,
        0b0111111111111110,
        0b0000000000000000,
        0b0000000000000000,
    ],
    '2': [
        0b0000111111110000,
        0b0011111111111100,
        0b0111111111111110,
        0b0111100000011110,
        0b1110000000001111,
        0b1110000000000111,
        0b0000000000000111,
        0b0000000000001111,
        0b0000000000011110,
        0b0000000000111100,
        0b0000000001111000,
        0b0000000011110000,
        0b0000000111100000,
        0b0000001111000000,
        0b0000011110000000,
        0b0000111100000000,
        0b0001111000000000,
        0b0011110000000000,
        0b0111100000000000,
        0b0111111111111110,
        0b0111111111111110,
        0b0111111111111110,
        0b0000000000000000,
        0b0000000000000000,
    ],
    '3': [
        0b0000111111110000,
        0b0011111111111100,
        0b0111111111111110,
        0b0111100000011110,
        0b0000000000001111,
        0b0000000000000111,
        0b0000000000000111,
        0b0000000000001111,
        0b0000000000011110,
        0b0000001111111100,
        0b0000001111111100,
        0b0000001111111100,
        0b0000000000011110,
        0b0000000000001111,
        0b0000000000000111,
        0b0000000000000111,
        0b0000000000001111,
        0b0111100000011110,
        0b0111111111111110,
        0b0011111111111100,
        0b0000111111110000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    ],
    '4': [
        0b0000000000111000,
        0b0000000001111000,
        0b0000000011111000,
        0b0000000111111000,
        0b0000001111011000,
        0b0000011110011000,
        0b0000111100011000,
        0b0001111000011000,
        0b0011110000011000,
        0b0111100000011000,
        0b1111000000011000,
        0b1110000000011000,
        0b1111111111111111,
        0b1111111111111111,
        0b1111111111111111,
        0b0000000000011000,
        0b0000000000011000,
        0b0000000000011000,
        0b0000000000011000,
        0b0000000000011000,
        0b0000000000011000,
        0b0000000000011000,
        0b0000000000000000,
        0b0000000000000000,
    ],
    '5': [
        0b0111111111111110,
        0b0111111111111110,
        0b0111111111111110,
        0b0111000000000000,
        0b0111000000000000,
        0b0111000000000000,
        0b0111000000000000,
        0b0111111111110000,
        0b0111111111111100,
        0b0111111111111110,
        0b0000000000011110,
        0b0000000000001111,
        0b0000000000000111,
        0b0000000000000111,
        0b0000000000000111,
        0b0000000000000111,
        0b0000000000001111,
        0b0111100000011110,
        0b0111111111111110,
        0b0011111111111100,
        0b0000111111110000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    ],
    '6': [
        0b0000011111111000,
        0b0001111111111110,
        0b0011111111111110,
        0b0111110000000000,
        0b0111000000000000,
        0b1110000000000000,
        0b1110000000000000,
        0b1110111111110000,
        0b1111111111111100,
        0b1111111111111110,
        0b1111100000011110,
        0b1110000000001111,
        0b1110000000000111,
        0b1110000000000111,
        0b1110000000000111,
        0b1110000000001111,
        0b0111100000011110,
        0b0111111111111110,
        0b0011111111111100,
        0b0000111111110000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    ],
    '7': [
        0b1111111111111110,
        0b1111111111111110,
        0b1111111111111110,
        0b0000000000001110,
        0b0000000000011110,
        0b0000000000111100,
        0b0000000000111000,
        0b0000000001111000,
        0b0000000001110000,
        0b0000000011110000,
        0b0000000011100000,
        0b0000000111100000,
        0b0000000111000000,
        0b0000001111000000,
        0b0000001110000000,
        0b0000011110000000,
        0b0000011100000000,
        0b0000111100000000,
        0b0000111000000000,
        0b0001111000000000,
        0b0001110000000000,
        0b0001110000000000,
        0b0000000000000000,
        0b0000000000000000,
    ],
    '8': [
        0b0000111111110000,
        0b0011111111111100,
        0b0111111111111110,
        0b0111100000011110,
        0b1110000000001111,
        0b1110000000000111,
        0b1110000000001111,
        0b0111100000011110,
        0b0011111111111100,
        0b0000111111110000,
        0b0011111111111100,
        0b0111111111111110,
        0b1111100000011111,
        0b1110000000000111,
        0b1110000000000111,
        0b1110000000000111,
        0b1110000000001111,
        0b0111100000011110,
        0b0111111111111110,
        0b0011111111111100,
        0b0000111111110000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    ],
    '9': [
        0b0000111111110000,
        0b0011111111111100,
        0b0111111111111110,
        0b0111100000011110,
        0b1110000000001111,
        0b1110000000000111,
        0b1110000000000111,
        0b1110000000000111,
        0b1110000000001111,
        0b0111100000011111,
        0b0111111111111111,
        0b0011111111110111,
        0b0000111111100111,
        0b0000000000000111,
        0b0000000000000111,
        0b0000000000001110,
        0b0000000000001110,
        0b0111111111111110,
        0b0111111111111100,
        0b0011111111111000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    ],
    ':': [
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000001111000000,
        0b0000001111000000,
        0b0000001111000000,
        0b0000001111000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000001111000000,
        0b0000001111000000,
        0b0000001111000000,
        0b0000001111000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    ],
}

def draw_char(lcd, char, x, y, color):
    """Draw a single character using bitmap font"""
    if char not in LARGE_DIGITS:
        return 16  # Return character width even if not found

    bitmap = LARGE_DIGITS[char]
    for row_idx, row_data in enumerate(bitmap):
        for col in range(16):
            if row_data & (1 << (15 - col)):
                lcd.pixel(x + col, y + row_idx, color)

    return 16  # Return character width for spacing

def draw_text(lcd, text, x, y, color, spacing=2):
    """Draw text using bitmap font"""
    current_x = x
    for char in text:
        char_width = draw_char(lcd, char, current_x, y, color)
        current_x += char_width + spacing
    return current_x - x  # Return total width

def get_text_width(text, spacing=2):
    """Calculate the width of text in pixels"""
    if not text:
        return 0
    return (16 * len(text)) + (spacing * (len(text) - 1))
